{% extends 'layout-public.html' %}

{% block pageTitle %}
Task list
{% endblock %}

{% block content %}
<div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-two-thirds">

        {% if data['submit-claim'] != 'completed' %}
        <h1 class="nhsuk-heading-l">Travel and Dual Accommodation Expenses task list</h1>
        {% else %}
        <h1 class="nhsuk-heading-l nhsuk-u-margin-bottom-9">Travel and Dual Accommodation Expenses task list</h1>
        {% endif %}

        {% if data['submit-claim'] != 'completed' %}
        <div class="nhsuk-inset-text">
            <span class="nhsuk-u-visually-hidden">Information: </span>
            <h2 class="nhsuk-heading-s nhsuk-u-margin-bottom-2">Claim tasks incomplete</h2>
            <p class="nhsuk-body nhsuk-u-margin-bottom-7">
                You have completed 0 of 5 sections.
            </p>
        </div>
        {% endif %}

        <!-- 1. Claim overview -->
        <h2 class="nhsuk-heading-m">1. Claim overview</h2>
        <ul class="nhsuk-task-list section-item">
            <li class="nhsuk-task-list__item nhsuk-task-list__item--with-link">
                <div class="nhsuk-task-list__name-and-hint">
                    <a class="nhsuk-task-list__link" href="TDAE-eligibility-cya">
                        Claim overview
                    </a>
                </div>
                <div class="nhsuk-task-list__status nhsuk-task-list__status--completed task-status">
                    Completed
                </div>
            </li>
        </ul>

        {% if checked('claiming-for', 'car') %}
        <!-- 2. Travel costs -->
        <h2 class="nhsuk-heading-m">2. Travel costs</h2>
        <ul class="nhsuk-task-list section-item">

            <!-- University travel details -->
            <li class="nhsuk-task-list__item nhsuk-task-list__item--with-link">
                <div class="nhsuk-task-list__name-and-hint">
                    {% if data['university-details'] === 'completed' %}
                    <a class="nhsuk-task-list__link" href="TDAE-normal-summary-cya">
                        University travel details
                    </a>
                    {% else %}
                    <a class="nhsuk-task-list__link" href="TDAE-normal-transport">
                        University travel details
                    </a>
                    {% endif %}
                </div>
                <div class="nhsuk-task-list__status task-status">
                    {% if data['university-details'] === 'completed' %}
                    Completed
                    {% else %}
                    Not started
                    {% endif %}
                </div>
            </li>

            <!-- Placement travel details -->
            <li class="nhsuk-task-list__item nhsuk-task-list__item--with-link">
                <div class="nhsuk-task-list__name-and-hint">
                    {% if data['placement-details'] === 'completed' %}
                    <a class="nhsuk-task-list__link" href="TDAE-placement-journey-cya">
                        Placement travel details
                    </a>
                    {% else %}
                    <a class="nhsuk-task-list__link" href="TDAE-placement-return-mileage">
                        Placement travel details
                    </a>
                    {% endif %}
                </div>
                <div class="nhsuk-task-list__status task-status">
                    {% if data['placement-details'] === 'completed' %}
                    Completed
                    {% else %}
                    Not started
                    {% endif %}
                </div>
            </li>

            <!-- Travel dates and evidence -->
            <li class="nhsuk-task-list__item nhsuk-task-list__item--with-link">
                <div class="nhsuk-task-list__name-and-hint">
                    {% if data['submit-claim'] === 'completed' %}
                    <a class="nhsuk-task-list__link" href="TDAE-claim-date-evidence-cya">
                        Placement travel dates{% if data['any-additional-costs'] !== 'no' %} and evidence{% endif %}
                    </a>
                    {% else %}
                    <a class="nhsuk-task-list__link" href="TDAE-start-claim">
                        Placement travel dates{% if data['any-additional-costs'] !== 'no' %} and evidence{% endif %}
                    </a>
                    {% endif %}
                </div>
                <div class="nhsuk-task-list__status task-status">
                    {% if data['add-travel-date-evidence'] === 'completed' %}
                    Completed
                    {% else %}
                    Not started
                    {% endif %}
                </div>
            </li>

        </ul>
        {% endif %}

        {% if checked('claiming-for', 'accommodation') %}
        <!-- Accommodation costs -->
        <h2 class="nhsuk-heading-m">
            {% if checked('claiming-for', 'car') %}3{% else %}2{% endif %}. Accommodation costs
        </h2>
        <ul class="nhsuk-task-list section-item">
            <li class="nhsuk-task-list__item nhsuk-task-list__item--with-link">
                <div class="nhsuk-task-list__name-and-hint">
                    {% if data['accommodation-details'] === 'completed' or data['accommodation-details'] === 'action' %}
                    <a class="nhsuk-task-list__link" href="../TDAE-accommodation-check">
                        Placement accommodation details and evidence
                    </a>
                    {% else %}
                    <a class="nhsuk-task-list__link" href="../TDAE-accommodation-start-date">
                        Placement accommodation details and evidence
                    </a>
                    {% endif %}
                </div>
                <div class="nhsuk-task-list__status task-status">
                    {% if data['accommodation-details'] === 'completed' %}
                    Completed
                    {% elif data['accommodation-details'] === 'action' %}
                    <strong class="nhsuk-tag nhsuk-tag--yellow">Action required</strong>
                    {% else %}
                    Not started
                    {% endif %}
                </div>
            </li>
        </ul>
        {% endif %}

        <!-- Submit claim -->
        <h2 class="nhsuk-heading-m">
            {% if checked('claiming-for', 'car') and checked('claiming-for', 'accommodation') %}
            4
            {% else %}
            3
            {% endif %}. Submit claim
        </h2>

        <ul class="nhsuk-task-list">
            <li class="nhsuk-task-list__item
        {% if
          (checked('claiming-for', 'car') and checked('claiming-for', 'accommodation')
          and data['university-details'] === 'completed'
          and data['placement-details'] === 'completed'
          and data['add-travel-date-evidence'] === 'completed'
          and data['accommodation-details'] === 'completed')
          or
          (checked('claiming-for', 'car')
          and data['university-details'] === 'completed'
          and data['placement-details'] === 'completed'
          and data['add-travel-date-evidence'] === 'completed')
          or
          (checked('claiming-for', 'accommodation')
          and data['accommodation-details'] === 'completed')
        %}
          nhsuk-task-list__item--with-link
        {% endif %}
      ">
                <div class="nhsuk-task-list__name-and-hint">
                    {% if data['submit-claim'] === 'completed' %}
                    <a class="nhsuk-task-list__link" href="TDAE-placement-cost-summary">
                        Submit your claim
                    </a>
                    {% elseif
                    (checked('claiming-for', 'car') and checked('claiming-for', 'accommodation')
                    and data['university-details'] === 'completed'
                    and data['placement-details'] === 'completed'
                    and data['add-travel-date-evidence'] === 'completed'
                    and data['accommodation-details'] === 'completed')
                    or
                    (checked('claiming-for', 'car')
                    and data['university-details'] === 'completed'
                    and data['placement-details'] === 'completed'
                    and data['add-travel-date-evidence'] === 'completed')
                    or
                    (checked('claiming-for', 'accommodation')
                    and data['accommodation-details'] === 'completed')
                    %}
                    <a class="nhsuk-task-list__link" href="TDAE-placement-cost-summary">
                        Submit your claim
                    </a>
                    {% else %}
                    <span>Submit your claim</span>
                    {% endif %}
                </div>

                <div class="nhsuk-task-list__status nhsuk-task-list__status--cannot-start-yet">
                    {% if data['submit-claim'] === 'completed' %}
                    Completed
                    {% else %}
                    Cannot start yet
                    {% endif %}
                </div>
            </li>
        </ul>

        <p>
            <a href="TDAE-returning-student/academic-year-details">
                Save and come back later
            </a>
        </p>

    </div>
</div>
{% endblock %}